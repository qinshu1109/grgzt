# [P0.7] Markdown导出功能

id: 27
title: Markdown导出（详细/简版两套模板）
priority: P0
estimate: 2番茄 (3小时)
status: todo
depends_on: [26]
parallel_with: []
module: export
ext_id:

## 目的/产出
实现Markdown格式的报价单导出功能，支持详细版和简版两种模板。

## 实施步骤

1. 报价数据结构整理
   - 从quotes和quote_items表读取完整报价数据
   - 整理三档价格和明细信息
   - 准备模板所需的变量和格式

2. 详细版模板实现
   - 包含项目信息、三档价格汇总
   - 详细的功能条目明细表
   - 税费预留和打包项说明
   - 付款和交付条款

3. 简版模板实现
   - 简化的项目信息
   - 核心功能条目汇总
   - 三档价格突出显示
   - 最基本的付款信息

4. 导出功能实现
   - 客户端Markdown文件生成
   - 自动下载功能
   - 文件命名规则（项目名+日期）
   - 导出预览和确认

## 验收标准

- ✅ 详细版模板包含完整报价信息
- ✅ 简版模板简洁明了突出重点
- ✅ 导出的Markdown文件格式正确
- ✅ 下载功能正常工作
- ✅ 文件命名包含项目信息
- ✅ 导出数据与界面显示一致

## 约束/边界

**仅修改以下文件/模块**：
- main.js (导出功能实现)
- index.html (导出按钮和预览)
- 新增模板文件

**明确不修改**：
- 报价计算逻辑
- 数据库结构和数据
- 其他导出格式

## 依赖/并行

- **依赖**: 26(税费预留计算，确保导出数据完整)
- **可并行**: 无（依赖前置任务）

## 风险与回退

**可能风险**：
- Markdown格式兼容性问题
- 模板变量替换错误
- 中文字符编码问题

**回退方式**：
- 使用标准Markdown语法
- 添加模板验证步骤
- 确保UTF-8编码
